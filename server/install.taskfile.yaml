# https://taskfile.dev

#Called by the vnbuild system to produce builds for my website
#https://www.vaughnnugent.com/resources/software

version: "3"

tasks:

  install:
    internal: true
    cmds:
    #make the plugin directory
    - cmd: mkdir -p {{ .DIR }}
      
    #extract the source archive into the plugin directory
    - cmd: tar{{ if eq OS "windows" }}.exe{{ end }} -xzf "{{ .SRC_DIR }}/{{ .FILE_NAME }}" -C "{{ .DIR }}"


    #remove all pckage.json files that could cause build issues
    - cmd: cd {{ .DIR }} && powershell 'Get-ChildItem -Path . -Recurse -File -Filter "package.json" | Remove-Item -Force'
      ignore_error: true
